{"ast":null,"code":"import tokenService from './tokenService';\nconst BASE_URL = '/api/users/'; // NOTE THIS IS configured to send of a multi/part form request\n// aka photo \n\nfunction signup(user) {\n  return fetch(BASE_URL + 'signup', {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/json'\n    }),\n    body: JSON.stringify(user)\n  }).then(res => {\n    if (res.ok) return res.json(); // Probably a duplicate email\n    // Writing your error handling like this allows you to throw the error response \n    // to the catch block where signup occurs,  \n    //     res.status(400).json({ err: \"Something went wrong\" }); notice err, and response.err match\n\n    return res.json().then(response => {\n      console.log(response);\n      throw new Error(response.err);\n    });\n  }) // Parameter destructuring!\n  .then(_ref => {\n    let {\n      token\n    } = _ref;\n    return tokenService.setToken(token);\n  }); // Setting our token in localStorage in our browser\n  // then we'll be able to use with every request!\n  // The above could have been written as\n  //.then((token) => token.token);\n}\n\nfunction getUser() {\n  return tokenService.getUserFromToken();\n}\n\nfunction logout() {\n  tokenService.removeToken();\n}\n\nfunction login(creds) {\n  return fetch(BASE_URL + 'login', {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/json'\n    }),\n    body: JSON.stringify(creds)\n  }).then(res => {\n    // Valid login if we have a status of 2xx (res.ok)\n    if (res.ok) return res.json();\n    return res.json().then(response => {\n      console.log(response);\n      throw new Error(response.err);\n    });\n  }).then(_ref2 => {\n    let {\n      token\n    } = _ref2;\n    return tokenService.setToken(token);\n  });\n}\n\nconst userService = {\n  signup,\n  logout,\n  login,\n  getUser\n};\nexport default userService;","map":{"version":3,"names":["tokenService","BASE_URL","signup","user","fetch","method","headers","Headers","body","JSON","stringify","then","res","ok","json","response","console","log","Error","err","token","setToken","getUser","getUserFromToken","logout","removeToken","login","creds","userService"],"sources":["/Users/gabrieldeleon/code/GA-Project-4/src/utils/userService.js"],"sourcesContent":["import tokenService from './tokenService';\n\nconst BASE_URL = '/api/users/';\n\n\n// NOTE THIS IS configured to send of a multi/part form request\n// aka photo \nfunction signup(user) {\n  return fetch(BASE_URL + 'signup', {\n    method: 'POST',\n    headers: new Headers({'Content-Type': 'application/json'}),\n    body: JSON.stringify(user)\n  })\n  .then(res => {\n    if (res.ok) return res.json();\n    // Probably a duplicate email\n    \n    // Writing your error handling like this allows you to throw the error response \n    // to the catch block where signup occurs,  \n\n//     res.status(400).json({ err: \"Something went wrong\" }); notice err, and response.err match\n    return res.json().then(response => {\n      console.log(response)\n      throw new Error(response.err)\n    })\n  })\n  // Parameter destructuring!\n  .then(({token}) => tokenService.setToken(token));\n  // Setting our token in localStorage in our browser\n  // then we'll be able to use with every request!\n  // The above could have been written as\n  //.then((token) => token.token);\n}\n\nfunction getUser() {\n  return tokenService.getUserFromToken();\n}\n\nfunction logout() {\n  tokenService.removeToken();\n}\n\nfunction login(creds) {\n  return fetch(BASE_URL + 'login', {\n    method: 'POST',\n    headers: new Headers({'Content-Type': 'application/json'}),\n    body: JSON.stringify(creds)\n  })\n  .then(res => {\n    // Valid login if we have a status of 2xx (res.ok)\n    if (res.ok) return res.json();\n    return res.json().then(response => {\n      console.log(response)\n      throw new Error(response.err)\n    })\n  })\n  .then(({token}) => tokenService.setToken(token));\n}\n\n\nconst userService = {\n  signup, \n  logout,\n  login,\n  getUser\n};\n\nexport default userService"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,gBAAzB;AAEA,MAAMC,QAAQ,GAAG,aAAjB,C,CAGA;AACA;;AACA,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;EACpB,OAAOC,KAAK,CAACH,QAAQ,GAAG,QAAZ,EAAsB;IAChCI,MAAM,EAAE,MADwB;IAEhCC,OAAO,EAAE,IAAIC,OAAJ,CAAY;MAAC,gBAAgB;IAAjB,CAAZ,CAFuB;IAGhCC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf;EAH0B,CAAtB,CAAL,CAKNQ,IALM,CAKDC,GAAG,IAAI;IACX,IAAIA,GAAG,CAACC,EAAR,EAAY,OAAOD,GAAG,CAACE,IAAJ,EAAP,CADD,CAEX;IAEA;IACA;IAEJ;;IACI,OAAOF,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBI,QAAQ,IAAI;MACjCC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MACA,MAAM,IAAIG,KAAJ,CAAUH,QAAQ,CAACI,GAAnB,CAAN;IACD,CAHM,CAAP;EAID,CAjBM,EAkBP;EAlBO,CAmBNR,IAnBM,CAmBD;IAAA,IAAC;MAACS;IAAD,CAAD;IAAA,OAAapB,YAAY,CAACqB,QAAb,CAAsBD,KAAtB,CAAb;EAAA,CAnBC,CAAP,CADoB,CAqBpB;EACA;EACA;EACA;AACD;;AAED,SAASE,OAAT,GAAmB;EACjB,OAAOtB,YAAY,CAACuB,gBAAb,EAAP;AACD;;AAED,SAASC,MAAT,GAAkB;EAChBxB,YAAY,CAACyB,WAAb;AACD;;AAED,SAASC,KAAT,CAAeC,KAAf,EAAsB;EACpB,OAAOvB,KAAK,CAACH,QAAQ,GAAG,OAAZ,EAAqB;IAC/BI,MAAM,EAAE,MADuB;IAE/BC,OAAO,EAAE,IAAIC,OAAJ,CAAY;MAAC,gBAAgB;IAAjB,CAAZ,CAFsB;IAG/BC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeiB,KAAf;EAHyB,CAArB,CAAL,CAKNhB,IALM,CAKDC,GAAG,IAAI;IACX;IACA,IAAIA,GAAG,CAACC,EAAR,EAAY,OAAOD,GAAG,CAACE,IAAJ,EAAP;IACZ,OAAOF,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBI,QAAQ,IAAI;MACjCC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MACA,MAAM,IAAIG,KAAJ,CAAUH,QAAQ,CAACI,GAAnB,CAAN;IACD,CAHM,CAAP;EAID,CAZM,EAaNR,IAbM,CAaD;IAAA,IAAC;MAACS;IAAD,CAAD;IAAA,OAAapB,YAAY,CAACqB,QAAb,CAAsBD,KAAtB,CAAb;EAAA,CAbC,CAAP;AAcD;;AAGD,MAAMQ,WAAW,GAAG;EAClB1B,MADkB;EAElBsB,MAFkB;EAGlBE,KAHkB;EAIlBJ;AAJkB,CAApB;AAOA,eAAeM,WAAf"},"metadata":{},"sourceType":"module"}