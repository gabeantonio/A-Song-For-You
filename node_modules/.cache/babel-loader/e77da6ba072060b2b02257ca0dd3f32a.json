{"ast":null,"code":"import React, { forwardRef, useState, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport useStyles from './MachineNumber.styles.js';\nconst MachineNumber = forwardRef((props, ref) => {\n  const [oldNumber, setOldNumber] = useState(props.value);\n  const [newNumber, setNewNumber] = useState(props.value);\n  const [scrollAnimationDirection, setScrollAnimationDirection] = useState(\"up\");\n  const [isActive, setIsActive] = useState(false);\n  const prevValueRef = usePrevious(props.value);\n\n  const scrollByDir = dir => {\n    setIsActive(true);\n    setScrollAnimationDirection(dir);\n    setTimeout(() => {\n      setIsActive(false);\n    }, 180);\n  };\n\n  const scroll = () => {\n    const {\n      newOriginalNumber,\n      oldOriginalNumber\n    } = props;\n\n    if (newOriginalNumber == null || oldOriginalNumber == null) {\n      return;\n    }\n\n    if (newOriginalNumber > oldOriginalNumber) {\n      scrollByDir(\"up\");\n    } else if (newOriginalNumber < oldOriginalNumber) {\n      scrollByDir(\"down\");\n    }\n  };\n\n  useEffect(() => {\n    setOldNumber(prevValueRef);\n    setNewNumber(props.value);\n    scroll();\n  }, [props.value, prevValueRef]);\n  const {\n    classes,\n    cx\n  } = useStyles(null, {\n    name: \"MachineNumber\"\n  });\n  const newNumberScrollAnimationClass = useMemo(() => isActive ? scrollAnimationDirection === \"up\" ? classes.currentNumberScrollUp : classes.currentNumberScrollDown : null, [isActive, scrollAnimationDirection]);\n  const oldNumberScrollAnimationClass = useMemo(() => isActive ? scrollAnimationDirection === \"up\" ? classes.oldNumberScrollUp : classes.oldNumberScrollDown : null, [isActive, scrollAnimationDirection]);\n  return /* @__PURE__ */React.createElement(\"span\", {\n    ref,\n    className: classes.baseNumber\n  }, oldNumber && /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.oldNumber, classes.currentNumberTop, oldNumberScrollAnimationClass)\n  }, oldNumber) || null, /* @__PURE__ */React.createElement(\"span\", null, /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.currentNumber, newNumberScrollAnimationClass)\n  }, newNumber)), oldNumber && /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.oldNumber, classes.oldNumberBottom, oldNumberScrollAnimationClass)\n  }, oldNumber) || null);\n});\nexport { MachineNumber };","map":{"version":3,"mappings":"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","names":["MachineNumber","forwardRef","props","ref","oldNumber","setOldNumber","useState","value","newNumber","setNewNumber","scrollAnimationDirection","setScrollAnimationDirection","isActive","setIsActive","prevValueRef","usePrevious","scrollByDir","dir","setTimeout","scroll","newOriginalNumber","oldOriginalNumber","useEffect","classes","cx","useStyles","name","newNumberScrollAnimationClass","useMemo","currentNumberScrollUp","currentNumberScrollDown","oldNumberScrollAnimationClass","oldNumberScrollUp","oldNumberScrollDown","React","createElement","className","baseNumber","currentNumberTop","currentNumber","oldNumberBottom"],"sources":["../../../src/Indicator/Machine/MachineNumber.tsx"],"sourcesContent":["import React, { useState, forwardRef, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport useStyles from './MachineNumber.styles';\n\ninterface MachineNumberProps {\n  value: number | string;\n  newOriginalNumber: number;\n  oldOriginalNumber: number;\n}\n\nexport const MachineNumber = forwardRef<HTMLDivElement, MachineNumberProps>((props, ref) => {\n  const [oldNumber, setOldNumber] = useState(props.value);\n  const [newNumber, setNewNumber] = useState(props.value);\n  const [scrollAnimationDirection, setScrollAnimationDirection] = useState<'up' | 'down'>('up');\n  const [isActive, setIsActive] = useState(false);\n  const prevValueRef = usePrevious(props.value);\n\n  const scrollByDir = (dir: 'up' | 'down') => {\n    setIsActive(true);\n    setScrollAnimationDirection(dir);\n    setTimeout(() => {\n      setIsActive(false);\n    }, 180);\n  };\n\n  const scroll = () => {\n    const { newOriginalNumber, oldOriginalNumber } = props;\n\n    if (newOriginalNumber == null || oldOriginalNumber == null) {\n      return;\n    }\n\n    if (newOriginalNumber > oldOriginalNumber) {\n      scrollByDir('up');\n    } else if (newOriginalNumber < oldOriginalNumber) {\n      scrollByDir('down');\n    }\n  };\n\n  useEffect(() => {\n    setOldNumber(prevValueRef);\n    setNewNumber(props.value);\n    scroll();\n  }, [props.value, prevValueRef]);\n\n  const { classes, cx } = useStyles(null, { name: 'MachineNumber' });\n\n  const newNumberScrollAnimationClass = useMemo(\n    () =>\n      isActive\n        ? scrollAnimationDirection === 'up'\n          ? classes.currentNumberScrollUp\n          : classes.currentNumberScrollDown\n        : null,\n    [isActive, scrollAnimationDirection]\n  );\n  const oldNumberScrollAnimationClass = useMemo(\n    () =>\n      isActive\n        ? scrollAnimationDirection === 'up'\n          ? classes.oldNumberScrollUp\n          : classes.oldNumberScrollDown\n        : null,\n    [isActive, scrollAnimationDirection]\n  );\n  return (\n    <span ref={ref} className={classes.baseNumber}>\n      {(oldNumber && (\n        <span\n          className={cx(classes.oldNumber, classes.currentNumberTop, oldNumberScrollAnimationClass)}\n        >\n          {oldNumber}\n        </span>\n      )) ||\n        null}\n      <span>\n        <span className={cx(classes.currentNumber, newNumberScrollAnimationClass)}>\n          {newNumber}\n        </span>\n      </span>\n      {(oldNumber && (\n        <span\n          className={cx(classes.oldNumber, classes.oldNumberBottom, oldNumberScrollAnimationClass)}\n        >\n          {oldNumber}\n        </span>\n      )) ||\n        null}\n    </span>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}