{"ast":null,"code":"import tokenService from \"./tokenService\";\nconst BASE_URL = '/api/posts';\nexport function create(post) {\n  return fetch(BASE_URL, {\n    method: 'POST',\n    body: post,\n    headers: {\n      'Authorization': 'Bearer ' + tokenService.getToken()\n    }\n  }).then(res => {\n    if (res.ok) return res.json();\n    throw new Error('CREATE ERROR: Check your server terminal for error.');\n  });\n}\nexport function deletePost(postId) {\n  return fetch(`${BASE_URL}/${postId}`, {\n    method: 'DELETE',\n    headers: {\n      'Authorization': \"Bearer \" + tokenService.getToken()\n    }\n  }).then(res => {\n    if (res.ok) return res.json();\n    throw new Error(res.error);\n  });\n}\nexport function getAll() {\n  return fetch(BASE_URL, {\n    headers: {\n      'Authorization': 'Bearer ' + tokenService.getToken()\n    }\n  }).then(res => {\n    if (res.ok) return res.json();\n    return res.json().then(response => {\n      console.log(response);\n      throw new Error(response.err);\n    });\n  });\n}","map":{"version":3,"names":["tokenService","BASE_URL","create","post","fetch","method","body","headers","getToken","then","res","ok","json","Error","deletePost","postId","error","getAll","response","console","log","err"],"sources":["/Users/gabrieldeleon/code/GA-Project-4/src/utils/postApi.js"],"sourcesContent":["import tokenService from \"./tokenService\";\n\nconst BASE_URL = '/api/posts';\n\nexport function create(post) {\n    return fetch(BASE_URL, {\n        method: 'POST',\n        body: post,\n        headers: {\n            'Authorization': 'Bearer ' + tokenService.getToken()\n        }\n    }).then( res => {\n        if(res.ok) return res.json()\n\n        throw new Error('CREATE ERROR: Check your server terminal for error.')\n    }) \n}\n\nexport function deletePost(postId) {\n    return fetch(`${BASE_URL}/${postId}`, {\n        method: 'DELETE',\n        headers: {\n        'Authorization': \"Bearer \" + tokenService.getToken(), \n        }\n    }).then(res => {\n        if (res.ok) return res.json();\n        throw new Error(res.error);\n    });\n}\n\n\nexport function getAll() {\n    return fetch(BASE_URL, {\n        headers: {\n        'Authorization': 'Bearer ' + tokenService.getToken() \n        }\n    })\n    .then((res) => {\n        if(res.ok) return res.json();\n\n        return res.json().then(response => {\n        console.log(response)\n        throw new Error(response.err)\n        })\n    });\n}"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,gBAAzB;AAEA,MAAMC,QAAQ,GAAG,YAAjB;AAEA,OAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;EACzB,OAAOC,KAAK,CAACH,QAAD,EAAW;IACnBI,MAAM,EAAE,MADW;IAEnBC,IAAI,EAAEH,IAFa;IAGnBI,OAAO,EAAE;MACL,iBAAiB,YAAYP,YAAY,CAACQ,QAAb;IADxB;EAHU,CAAX,CAAL,CAMJC,IANI,CAMEC,GAAG,IAAI;IACZ,IAAGA,GAAG,CAACC,EAAP,EAAW,OAAOD,GAAG,CAACE,IAAJ,EAAP;IAEX,MAAM,IAAIC,KAAJ,CAAU,qDAAV,CAAN;EACH,CAVM,CAAP;AAWH;AAED,OAAO,SAASC,UAAT,CAAoBC,MAApB,EAA4B;EAC/B,OAAOX,KAAK,CAAE,GAAEH,QAAS,IAAGc,MAAO,EAAvB,EAA0B;IAClCV,MAAM,EAAE,QAD0B;IAElCE,OAAO,EAAE;MACT,iBAAiB,YAAYP,YAAY,CAACQ,QAAb;IADpB;EAFyB,CAA1B,CAAL,CAKJC,IALI,CAKCC,GAAG,IAAI;IACX,IAAIA,GAAG,CAACC,EAAR,EAAY,OAAOD,GAAG,CAACE,IAAJ,EAAP;IACZ,MAAM,IAAIC,KAAJ,CAAUH,GAAG,CAACM,KAAd,CAAN;EACH,CARM,CAAP;AASH;AAGD,OAAO,SAASC,MAAT,GAAkB;EACrB,OAAOb,KAAK,CAACH,QAAD,EAAW;IACnBM,OAAO,EAAE;MACT,iBAAiB,YAAYP,YAAY,CAACQ,QAAb;IADpB;EADU,CAAX,CAAL,CAKNC,IALM,CAKAC,GAAD,IAAS;IACX,IAAGA,GAAG,CAACC,EAAP,EAAW,OAAOD,GAAG,CAACE,IAAJ,EAAP;IAEX,OAAOF,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBS,QAAQ,IAAI;MACnCC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MACA,MAAM,IAAIL,KAAJ,CAAUK,QAAQ,CAACG,GAAnB,CAAN;IACC,CAHM,CAAP;EAIH,CAZM,CAAP;AAaH"},"metadata":{},"sourceType":"module"}