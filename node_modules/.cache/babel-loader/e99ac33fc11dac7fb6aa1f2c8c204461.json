{"ast":null,"code":"import _slicedToArray from \"/Users/gabrieldeleon/code/GA-Project-4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useState, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport useStyles from './MachineNumber.styles.js';\nvar MachineNumber = forwardRef(function (props, ref) {\n  var _useState = useState(props.value),\n      _useState2 = _slicedToArray(_useState, 2),\n      oldNumber = _useState2[0],\n      setOldNumber = _useState2[1];\n\n  var _useState3 = useState(props.value),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newNumber = _useState4[0],\n      setNewNumber = _useState4[1];\n\n  var _useState5 = useState(\"up\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      scrollAnimationDirection = _useState6[0],\n      setScrollAnimationDirection = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isActive = _useState8[0],\n      setIsActive = _useState8[1];\n\n  var prevValueRef = usePrevious(props.value);\n\n  var scrollByDir = function scrollByDir(dir) {\n    setIsActive(true);\n    setScrollAnimationDirection(dir);\n    setTimeout(function () {\n      setIsActive(false);\n    }, 180);\n  };\n\n  var scroll = function scroll() {\n    var newOriginalNumber = props.newOriginalNumber,\n        oldOriginalNumber = props.oldOriginalNumber;\n\n    if (newOriginalNumber == null || oldOriginalNumber == null) {\n      return;\n    }\n\n    if (newOriginalNumber > oldOriginalNumber) {\n      scrollByDir(\"up\");\n    } else if (newOriginalNumber < oldOriginalNumber) {\n      scrollByDir(\"down\");\n    }\n  };\n\n  useEffect(function () {\n    setOldNumber(prevValueRef);\n    setNewNumber(props.value);\n    scroll();\n  }, [props.value, prevValueRef]);\n\n  var _useStyles = useStyles(null, {\n    name: \"MachineNumber\"\n  }),\n      classes = _useStyles.classes,\n      cx = _useStyles.cx;\n\n  var newNumberScrollAnimationClass = useMemo(function () {\n    return isActive ? scrollAnimationDirection === \"up\" ? classes.currentNumberScrollUp : classes.currentNumberScrollDown : null;\n  }, [isActive, scrollAnimationDirection]);\n  var oldNumberScrollAnimationClass = useMemo(function () {\n    return isActive ? scrollAnimationDirection === \"up\" ? classes.oldNumberScrollUp : classes.oldNumberScrollDown : null;\n  }, [isActive, scrollAnimationDirection]);\n  return /* @__PURE__ */React.createElement(\"span\", {\n    ref: ref,\n    className: classes.baseNumber\n  }, oldNumber && /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.oldNumber, classes.currentNumberTop, oldNumberScrollAnimationClass)\n  }, oldNumber) || null, /* @__PURE__ */React.createElement(\"span\", null, /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.currentNumber, newNumberScrollAnimationClass)\n  }, newNumber)), oldNumber && /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.oldNumber, classes.oldNumberBottom, oldNumberScrollAnimationClass)\n  }, oldNumber) || null);\n});\nexport { MachineNumber };","map":{"version":3,"mappings":"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","names":["MachineNumber","forwardRef","props","ref","useState","value","oldNumber","setOldNumber","newNumber","setNewNumber","scrollAnimationDirection","setScrollAnimationDirection","isActive","setIsActive","prevValueRef","usePrevious","scrollByDir","dir","setTimeout","scroll","newOriginalNumber","oldOriginalNumber","useEffect","useStyles","name","classes","cx","newNumberScrollAnimationClass","useMemo","currentNumberScrollUp","currentNumberScrollDown","oldNumberScrollAnimationClass","oldNumberScrollUp","oldNumberScrollDown","React","createElement","className","baseNumber","currentNumberTop","currentNumber","oldNumberBottom"],"sources":["../../../src/Indicator/Machine/MachineNumber.tsx"],"sourcesContent":["import React, { useState, forwardRef, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport useStyles from './MachineNumber.styles';\n\ninterface MachineNumberProps {\n  value: number | string;\n  newOriginalNumber: number;\n  oldOriginalNumber: number;\n}\n\nexport const MachineNumber = forwardRef<HTMLDivElement, MachineNumberProps>((props, ref) => {\n  const [oldNumber, setOldNumber] = useState(props.value);\n  const [newNumber, setNewNumber] = useState(props.value);\n  const [scrollAnimationDirection, setScrollAnimationDirection] = useState<'up' | 'down'>('up');\n  const [isActive, setIsActive] = useState(false);\n  const prevValueRef = usePrevious(props.value);\n\n  const scrollByDir = (dir: 'up' | 'down') => {\n    setIsActive(true);\n    setScrollAnimationDirection(dir);\n    setTimeout(() => {\n      setIsActive(false);\n    }, 180);\n  };\n\n  const scroll = () => {\n    const { newOriginalNumber, oldOriginalNumber } = props;\n\n    if (newOriginalNumber == null || oldOriginalNumber == null) {\n      return;\n    }\n\n    if (newOriginalNumber > oldOriginalNumber) {\n      scrollByDir('up');\n    } else if (newOriginalNumber < oldOriginalNumber) {\n      scrollByDir('down');\n    }\n  };\n\n  useEffect(() => {\n    setOldNumber(prevValueRef);\n    setNewNumber(props.value);\n    scroll();\n  }, [props.value, prevValueRef]);\n\n  const { classes, cx } = useStyles(null, { name: 'MachineNumber' });\n\n  const newNumberScrollAnimationClass = useMemo(\n    () =>\n      isActive\n        ? scrollAnimationDirection === 'up'\n          ? classes.currentNumberScrollUp\n          : classes.currentNumberScrollDown\n        : null,\n    [isActive, scrollAnimationDirection]\n  );\n  const oldNumberScrollAnimationClass = useMemo(\n    () =>\n      isActive\n        ? scrollAnimationDirection === 'up'\n          ? classes.oldNumberScrollUp\n          : classes.oldNumberScrollDown\n        : null,\n    [isActive, scrollAnimationDirection]\n  );\n  return (\n    <span ref={ref} className={classes.baseNumber}>\n      {(oldNumber && (\n        <span\n          className={cx(classes.oldNumber, classes.currentNumberTop, oldNumberScrollAnimationClass)}\n        >\n          {oldNumber}\n        </span>\n      )) ||\n        null}\n      <span>\n        <span className={cx(classes.currentNumber, newNumberScrollAnimationClass)}>\n          {newNumber}\n        </span>\n      </span>\n      {(oldNumber && (\n        <span\n          className={cx(classes.oldNumber, classes.oldNumberBottom, oldNumberScrollAnimationClass)}\n        >\n          {oldNumber}\n        </span>\n      )) ||\n        null}\n    </span>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}