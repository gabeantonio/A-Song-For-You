{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gabrieldeleon/code/GA-Project-4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gabrieldeleon/code/GA-Project-4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gabrieldeleon/code/GA-Project-4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Header from'../../components/Header';import ProfileFeed from'../../components/ProfileFeed';import ErrorMessage from'../../components/ErrorMessage/ErrorMessage';import userService from'../../utils/userService';import*as likesAPI from'../../utils/likesApi';import{SimpleGrid}from'@mantine/core';import{useParams}from'react-router-dom';import{DEFAULT_THEME,LoadingOverlay}from'@mantine/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfilePage(_ref){var loggedInUser=_ref.loggedInUser,logout=_ref.logout;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),profileUser=_useState2[0],setProfileUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useParams=useParams(),username=_useParams.username;function addLike(_x){return _addLike.apply(this,arguments);}function _addLike(){_addLike=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(postId){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return likesAPI.create(postId);case 3:response=_context.sent;console.log(response,'<--- THE RESPONSE FROM ADD LIKE!');getProfile();_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0,'<--- THE ERROR FROM THE SERVER!');case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _addLike.apply(this,arguments);}function removeLike(_x2){return _removeLike.apply(this,arguments);}function _removeLike(){_removeLike=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(likeId){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return likesAPI.removeLike(likeId);case 3:response=_context2.sent;console.log(response,'REMOVED LIKE');getProfile();_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);setError(\"Error in removing like!\");case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return _removeLike.apply(this,arguments);}function getProfile(){return _getProfile.apply(this,arguments);}function _getProfile(){_getProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return userService.getProfile(username);case 3:response=_context3.sent;setLoading(false);setProfileUser(response.data.user);setPosts(response.data.posts);console.log(response,'<--- OUR DATA');_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);setError('Profile does not exist!');case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return _getProfile.apply(this,arguments);}useEffect(function(){getProfile();},[username]);if(error){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(ErrorMessage,{error:error})]});}var customLoader=/*#__PURE__*/_jsx(\"svg\",{width:\"54\",height:\"54\",viewBox:\"0 0 38 38\",xmlns:\"http://www.w3.org/2000/svg\",stroke:DEFAULT_THEME.colors.blue[6],children:/*#__PURE__*/_jsx(\"g\",{fill:\"none\",fillRule:\"evenodd\",children:/*#__PURE__*/_jsxs(\"g\",{transform:\"translate(1 1)\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"circle\",{strokeOpacity:\".5\",cx:\"18\",cy:\"18\",r:\"18\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M36 18c0-9.94-8.06-18-18-18\",children:/*#__PURE__*/_jsx(\"animateTransform\",{attributeName:\"transform\",type:\"rotate\",from:\"0 18 18\",to:\"360 18 18\",dur:\"1s\",repeatCount:\"indefinite\"})})]})})});if(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(LoadingOverlay,{loader:customLoader,visible:true})]});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(SimpleGrid,{cols:1,spacing:\"50\",verticalSpacing:\"50\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Header,{logout:logout})}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"0 0 5% 25%\",maxWidth:700},children:/*#__PURE__*/_jsx(ProfileFeed,{loggedInUser:loggedInUser,posts:posts,addLike:addLike,removeLike:removeLike})})]})});}","map":{"version":3,"names":["React","useState","useEffect","Header","ProfileFeed","ErrorMessage","userService","likesAPI","SimpleGrid","useParams","DEFAULT_THEME","LoadingOverlay","ProfilePage","loggedInUser","logout","profileUser","setProfileUser","posts","setPosts","loading","setLoading","error","setError","username","addLike","postId","create","response","console","log","getProfile","removeLike","likeId","data","user","message","customLoader","colors","blue","margin","maxWidth"],"sources":["/Users/gabrieldeleon/code/GA-Project-4/src/pages/ProfilePage/ProfilePage.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Header from '../../components/Header';\nimport ProfileFeed from '../../components/ProfileFeed';\nimport ErrorMessage from '../../components/ErrorMessage/ErrorMessage';\nimport userService from '../../utils/userService';\nimport * as likesAPI from '../../utils/likesApi';\nimport { SimpleGrid } from '@mantine/core';\nimport { useParams } from 'react-router-dom';\nimport { DEFAULT_THEME, LoadingOverlay } from '@mantine/core';\n\nexport default function ProfilePage({loggedInUser, logout}) {\n\n    const [profileUser, setProfileUser] = useState({});\n    const [posts, setPosts] = useState([]);\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState('');\n    const { username } = useParams();\n\n    async function addLike(postId) {\n        try {\n            const response = await likesAPI.create(postId);\n            console.log(response, '<--- THE RESPONSE FROM ADD LIKE!');\n            getProfile();\n        } catch(err) {\n            console.log(err, '<--- THE ERROR FROM THE SERVER!')\n        }\n    }\n\n    async function removeLike(likeId) {\n        try {\n            const response = await likesAPI.removeLike(likeId);\n            console.log(response, 'REMOVED LIKE');\n            getProfile();\n        } catch (err) {\n            console.log(err);\n            setError(\"Error in removing like!\");\n        }\n        }\n\n\n        async function getProfile() {\n            try {\n                const response = await userService.getProfile(username);\n                setLoading(false)\n                setProfileUser(response.data.user);\n                setPosts(response.data.posts);\n                console.log(response, '<--- OUR DATA')\n            } catch(err) {\n                console.log(err.message);\n                setError('Profile does not exist!')\n            }\n        }\n        \n\n        useEffect(() => {\n\n            getProfile()\n\n        }, [username])\n\n        if(error){\n            return (\n            <>\n                <Header />\n                <ErrorMessage error={error} />\n            </>\n            )\n        }\n\n        const customLoader = (\n            <svg\n            width=\"54\"\n            height=\"54\"\n            viewBox=\"0 0 38 38\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            stroke={DEFAULT_THEME.colors.blue[6]}\n            >\n            <g fill=\"none\" fillRule=\"evenodd\">\n            <g transform=\"translate(1 1)\" strokeWidth=\"2\">\n                <circle strokeOpacity=\".5\" cx=\"18\" cy=\"18\" r=\"18\" />\n                <path d=\"M36 18c0-9.94-8.06-18-18-18\">\n                <animateTransform\n                    attributeName=\"transform\"\n                    type=\"rotate\"\n                    from=\"0 18 18\"\n                    to=\"360 18 18\"\n                    dur=\"1s\"\n                    repeatCount=\"indefinite\"\n                />\n                </path>\n            </g>\n            </g>\n        </svg>\n        );\n\n        if (loading) {\n            return (\n            <>\n                <Header />\n                <LoadingOverlay loader={customLoader} visible />\n            </>\n            )\n        }\n\n\n        return (\n        <>\n            <SimpleGrid cols={1} spacing=\"50\" verticalSpacing=\"50\">\n                <div><Header logout={logout} /></div>\n                <div style={{ margin: \"0 0 5% 25%\", maxWidth: 700 }}><ProfileFeed loggedInUser={loggedInUser} posts={posts} addLike={addLike} removeLike={removeLike} /></div>\n            </SimpleGrid>\n        </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}