{"ast":null,"code":"function joiResolver(schema) {\n  const _schema = schema;\n  return values => {\n    const parsed = _schema.validate(values, {\n      abortEarly: false\n    });\n\n    if (!parsed.error) {\n      return {};\n    }\n\n    const results = {};\n    parsed.error.details.forEach(error => {\n      results[error.path.join(\".\")] = error.message;\n    });\n    return results;\n  };\n}\n\nexport { joiResolver };","map":{"version":3,"mappings":"AAAO,SAASA,WAAT,CAAqBC,MAArB,EAA6B;EAClC,MAAMC,OAAO,GAAGD,MAAhB;EACA,OAAQE,MAAD,IAAY;IACjB,MAAMC,MAAM,GAAGF,OAAO,CAACG,QAAR,CAAiBF,MAAjB,EAAyB;MAAEG,UAAU,EAAE;IAAd,CAAzB,CAAf;;IACA,IAAI,CAACF,MAAM,CAACG,KAAZ,EAAmB;MACjB,OAAO,EAAP;IACD;;IACD,MAAMC,OAAO,GAAG,EAAhB;IACAJ,MAAM,CAACG,KAAP,CAAaE,OAAb,CAAqBC,OAArB,CAA8BH,KAAD,IAAW;MACtCC,OAAO,CAACD,KAAK,CAACI,IAAN,CAAWC,IAAX,CAAgB,GAAhB,CAAD,CAAP,GAAgCL,KAAK,CAACM,OAAtC;IACD,CAFD;IAGA,OAAOL,OAAP;EACD,CAVD;AAWF","names":["joiResolver","schema","_schema","values","parsed","validate","abortEarly","error","results","details","forEach","path","join","message"],"sources":["../../../src/resolvers/joi-resolver/joi-resolver.ts"],"sourcesContent":["import type { FormErrors } from '../../types';\n\ninterface JoiError {\n  path: (string | number)[];\n  message: string;\n}\n\ninterface JoiResults {\n  success: boolean;\n  error: {\n    details: JoiError[];\n  };\n}\n\ninterface JoiSchema {\n  validate(values: Record<string, any>, options: { abortEarly: boolean }): JoiResults;\n}\n\nexport function joiResolver(schema: any) {\n  const _schema: JoiSchema = schema;\n  return (values: Record<string, any>): FormErrors => {\n    const parsed = _schema.validate(values, { abortEarly: false });\n\n    if (!parsed.error) {\n      return {};\n    }\n\n    const results = {};\n    parsed.error.details.forEach((error) => {\n      results[error.path.join('.')] = error.message;\n    });\n\n    return results;\n  };\n}\n"]},"metadata":{},"sourceType":"module"}